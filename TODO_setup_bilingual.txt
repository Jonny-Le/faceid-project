=============================================================
ğŸ§   FACE VERIFICATION PROJECT â€“ HÆ¯á»šNG DáºªN SONG NGá»® / BILINGUAL SETUP GUIDE
=============================================================

ğŸ“ Má»¤C TIÃŠU / OBJECTIVE
-------------------------------------------------------------
ğŸ‡»ğŸ‡³ Thiáº¿t láº­p mÃ´i trÆ°á»ng huáº¥n luyá»‡n AI (Face Verification) hoÃ n chá»‰nh trÃªn GPU RTX 5090,  
sá»­ dá»¥ng PyTorch (nightly) vá»›i CUDA 12.8 vÃ  mÃ´i trÆ°á»ng áº£o venv-pytorch.  

ğŸ‡ºğŸ‡¸ Fully set up an AI Face Verification training environment on RTX 5090 GPU,  
using PyTorch (nightly build) with CUDA 12.8 inside the `venv-pytorch` environment.

-------------------------------------------------------------
I. Cáº¤U TRÃšC Dá»° ÃN / PROJECT STRUCTURE
-------------------------------------------------------------
~/myprojects/faceid-project/
â”œâ”€â”€ src/                â†’ MÃ£ nguá»“n chÃ­nh / Main Python source code  
â”œâ”€â”€ data/               â†’ áº¢nh huáº¥n luyá»‡n & kiá»ƒm thá»­ / Training & validation data  
â”œâ”€â”€ models/             â†’ Checkpoints (.pt) / Trained models  
â”œâ”€â”€ results/            â†’ Káº¿t quáº£ inference / Evaluation results  
â”œâ”€â”€ logs/               â†’ File log & TensorBoard / Training logs  
â”œâ”€â”€ notebooks/          â†’ Notebook thá»­ nghiá»‡m / Optional notebooks  
â””â”€â”€ TODO_setup_bilingual.txt â†’ File hÆ°á»›ng dáº«n nÃ y / This guide

-------------------------------------------------------------
II. CHUáº¨N Bá»Š Dá»® LIá»†U / DATA PREPARATION
-------------------------------------------------------------
ğŸ‡»ğŸ‡³ Táº¡o cáº¥u trÃºc dá»¯ liá»‡u nhÆ° sau:  
ğŸ‡ºğŸ‡¸ Create the data directory structure as below:

data/
â”œâ”€â”€ train/
â”‚   â”œâ”€â”€ person_a/ img1.jpg img2.jpg ...
â”‚   â”œâ”€â”€ person_b/ ...
â””â”€â”€ val/
    â”œâ”€â”€ person_x/ ...
    â””â”€â”€ person_y/ ...

ğŸ‘‰ `train/` dÃ¹ng Ä‘á»ƒ huáº¥n luyá»‡n â€“ `val/` Ä‘á»ƒ kiá»ƒm thá»­ accuracy.  
ğŸ‘‰ `train/` is for training, and `val/` is for verification testing.

Má»—i thÆ° má»¥c con tÆ°Æ¡ng á»©ng vá»›i má»™t ngÆ°á»i.  
Each subfolder corresponds to a single individual.

-------------------------------------------------------------
III. KÃCH HOáº T MÃ”I TRÆ¯á»œNG / ACTIVATE THE ENVIRONMENT
-------------------------------------------------------------
ğŸ‡»ğŸ‡³ KÃ­ch hoáº¡t mÃ´i trÆ°á»ng áº£o PyTorch:  
ğŸ‡ºğŸ‡¸ Activate your virtual PyTorch environment:

source ~/venv-pytorch/bin/activate

Khi kÃ­ch hoáº¡t thÃ nh cÃ´ng:  
Once activated:
(venv-pytorch) hoc@hoc-System-Product-Name:~/myprojects/faceid-project$

-------------------------------------------------------------
IV. CHáº Y HUáº¤N LUYá»†N / RUN TRAINING
-------------------------------------------------------------
ğŸ‡»ğŸ‡³ Cháº¡y thá»­ huáº¥n luyá»‡n 1 epoch Ä‘áº§u tiÃªn Ä‘á»ƒ kiá»ƒm tra mÃ´i trÆ°á»ng.  
ğŸ‡ºğŸ‡¸ Run a 1-epoch test training to verify everything works.

python src/train.py --epochs 1 --batch_size 64

Káº¿t quáº£ / Output:
âœ… Model tá»‘t nháº¥t lÆ°u táº¡i: models/backbone_best.pt  
âœ… Accuracy hiá»ƒn thá»‹ trÃªn terminal  
âœ… Log huáº¥n luyá»‡n ghi vÃ o logs/

-------------------------------------------------------------
V. THAM Sá» QUAN TRá»ŒNG / IMPORTANT ARGUMENTS
-------------------------------------------------------------
| Tham sá»‘ / Argument     | MÃ´ táº£ / Description                    | Máº·c Ä‘á»‹nh / Default |
|-------------------------|----------------------------------------|--------------------|
| --img_size              | KÃ­ch thÆ°á»›c áº£nh Ä‘áº§u vÃ o / Image size    | 224 |
| --batch_size            | Batch huáº¥n luyá»‡n / Training batch size | 64 |
| --embed_dim             | KÃ­ch thÆ°á»›c vector Ä‘áº·c trÆ°ng / Embedding dim | 512 |
| --pairs_per_epoch       | Sá»‘ cáº·p áº£nh má»—i epoch / Image pairs per epoch | 50000 |
| --pos_ratio             | Tá»· lá»‡ cáº·p cÃ¹ng ngÆ°á»i / Positive pair ratio | 0.5 |
| --epochs                | Sá»‘ epoch / Number of epochs            | 1 |
| --eval_pairs            | Cáº·p dÃ¹ng Ä‘á»ƒ kiá»ƒm thá»­ / Eval pairs     | 10000 |

ğŸ‡»ğŸ‡³ DÃ¹ng TensorBoard Ä‘á»ƒ xem log:  
ğŸ‡ºğŸ‡¸ Use TensorBoard to monitor training:
tensorboard --logdir logs/

-------------------------------------------------------------
VI. GHI CHÃš Ká»¸ THUáº¬T / TECHNICAL NOTES
-------------------------------------------------------------
ğŸ‡»ğŸ‡³ Dá»± Ã¡n báº­t tá»‘i Æ°u GPU Ä‘á»ƒ táº­n dá»¥ng tá»‘i Ä‘a RTX 5090:  
ğŸ‡ºğŸ‡¸ The project enables all GPU optimizations for RTX 5090:

âœ… FP16 Automatic Mixed Precision (AMP)  
âœ… Memory format `channels_last`  
âœ… TF32 báº­t sáºµn cho Tensor Cores:
torch.backends.cuda.matmul.fp32_precision = "high"
torch.backends.cudnn.conv.fp32_precision  = "tf32"

âœ… Model chÃ­nh: ResNet50 + ArcFace  
âœ… Loss: cosine + binary cross entropy  
âœ… Evaluation: cosine threshold accuracy

-------------------------------------------------------------
VII. XÃC NHáº¬N THIáº¾T Láº¬P / VERIFY ENVIRONMENT
-------------------------------------------------------------
ğŸ‡»ğŸ‡³ Cháº¡y Ä‘oáº¡n sau Ä‘á»ƒ xÃ¡c nháº­n driver & GPU hoáº¡t Ä‘á»™ng Ä‘Ãºng:  
ğŸ‡ºğŸ‡¸ Run this to confirm PyTorch + CUDA detect your GPU:

python - <<'PY'
import torch
print("Torch:", torch.__version__, "CUDA:", torch.version.cuda)
print("CUDA available:", torch.cuda.is_available())
if torch.cuda.is_available():
    print("Device:", torch.cuda.get_device_name(0))
    print("Capability:", torch.cuda.get_device_capability(0))
PY

Ká»³ vá»ng káº¿t quáº£ / Expected:
Torch: 2.10.0.dev...  CUDA: 12.8  
CUDA available: True  
Device: NVIDIA GeForce RTX 5090  
Capability: (12, 0)

-------------------------------------------------------------
VIII. Gá»¢I Ã Má» Rá»˜NG / NEXT STEPS
-------------------------------------------------------------
1ï¸âƒ£ Huáº¥n luyá»‡n láº¡i vá»›i dataset lá»›n vÃ  augmentations.  
   â†’ Train on larger datasets with data augmentations.  
2ï¸âƒ£ ThÃªm module ArcFace Ä‘á»ƒ tÄƒng Ä‘á»™ phÃ¢n biá»‡t.  
   â†’ Add ArcMarginProduct for supervised fine-tuning.  
3ï¸âƒ£ ÄÃ¡nh giÃ¡ báº±ng ROC-AUC hoáº·c EER metrics.  
   â†’ Evaluate with ROC-AUC or EER for verification quality.  
4ï¸âƒ£ Sá»­ dá»¥ng torch.compile() Ä‘á»ƒ tá»‘i Æ°u hiá»‡u nÄƒng.  
   â†’ Use torch.compile() for performance optimization.  

-------------------------------------------------------------
IX. TRáº NG THÃI CUá»I / FINAL CHECKLIST
-------------------------------------------------------------
âœ… NVIDIA driver 580.95.05 hoáº¡t Ä‘á»™ng Ä‘Ãºng (CUDA 12.6â€“12.8).  
âœ… PyTorch nightly (cu128) nháº­n RTX 5090.  
âœ… GEMM FP16 benchmark cháº¡y á»•n Ä‘á»‹nh.  
âœ… Dá»± Ã¡n cá»‘ Ä‘á»‹nh mÃ´i trÆ°á»ng táº¡i venv-pytorch.  
âœ… Sáºµn sÃ ng huáº¥n luyá»‡n thá»±c táº¿.

-------------------------------------------------------------
ğŸ“„ File nÃ y Ä‘Æ°á»£c lÆ°u táº¡i / This file is located at:
~/myprojects/faceid-project/TODO_setup_bilingual.txt
=============================================================
